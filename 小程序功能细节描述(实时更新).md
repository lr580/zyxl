将以页面为板块，分块描述小程序功能细节。

板块主要可分为四个：首页、树洞、小剧场、“我”。此外还有附属的骨架屏板块。

## 骨架屏

#### 初次进入页面

用户首次打开小程序时，会进入本页面，本页面由全屏的小程序特色宣传图文轮播

用户点击按钮后退出该页面，初始化用户信息，进入首页

#### 骨架屏

之后每次用户打开小程序，在小程序完全加载结束前，都会处于该页面

该页面主要由小程序标题和图标构成

加载完毕后退出该页面，进入首页



## 首页

当处于首页、树洞、小剧场或“我”页面的主页时，屏幕下方均会有底部导航栏，栏目内容即这四个页面的图标和文字，点击后跳转到对应页面。

#### 主页

首页排版主要由活动海报区和小功能导航区组成。

**活动海报区：**

有轮播的海报图片，点击后进入**海报页面**。海报页面是富文本(含图片和多种格式的文字)的活动内容介绍。预计仅会展示两个活动(悄悄话和VR)。展示内容仅供示例，没有真实业务场景信息出现。这两个活动的介绍页有按钮可以跳转到小程序内对应的预约页面(但是没有真实业务场景信息，仅供摆看)。



##### 小功能导航区：

有三个导航按钮，分别是：

1. 悄悄话预约
2. VR体验展预约
3. 积分兑换

点击后进入对应的页面。



#### 悄悄话、VR预约页面

一些图片、文字和按钮。没有真实业务场景信息，仅供摆看。

有模拟的可预约时间段，用户可以在有效范围内选择并预约，只要选择了正确的时间段，若用户之前未预约过，提示预约成功；若预约过，提示已预约。所有预约没有真实效果。



#### 积分兑换页面

没有真实业务场景信息，仅供摆看。

规定用户每浏览一个未浏览过的互动视频，就会增加$1$积分。初始积分$0$。

有若干个模拟的兑换礼品，点击后会显示详细信息(不跳转页面)。每个礼品组成如下：

1. 名字
2. 大图
3. 简介
4. 详细介绍
5. 单价
6. 余量 (可设置为无限)
7. 已拥有数目

有余量且积分够时，允许用户购买物品(输入或按钮选择购买数量)。所有物品实际不能使用(只能看拥有数目)。



## 树洞

#### 帖子和跟帖的结构

**话题的组成：**

1. 标题
2. 简介
3. 类别(感情、学习、心灵、职业、校园热点之一)
4. 发帖时间(年月日时分)
5. 最后跟帖时间(年月日时分)
6. 浏览次数(每点击进入一次算一个浏览)
7. 跟帖次数、跟帖的帖子ID列表
8. 发帖人ID
9. 话题内容 (富文本，允许由下面内容和格式组成：)
   1. 文字
   2. 图片
   3. 六种大小的标题
   4. 分割线
   5. 居中
   6. 加粗
   7. 倾斜

**跟帖的组成：**

1. 跟帖时间(年月日时分)
2. 跟帖人ID 
3. 回复的跟帖ID (当跟帖一个话题的跟帖时，即回复帖子的回复)
4. 跟帖内容 (富文本)



> 会提供数个作为样例的话题和跟帖，但没有真实业务场景信息。



#### 树洞主页页面

树洞主页从上到下由以下部分组成：搜索筛选区、话题展示区

**搜索筛选区：**

> 注：不保证完成某个功能点可能出于以下两个原因之一：
>
> - 该功能点没有明显的实际意义
> - 该功能点完成所需用时较高，不能保证DDL内完成

1. (不保证完成该点) 一个高级搜索框，点击展开，有两种搜索模式：
   1. 普通搜索 输入关键字，得到含关键字的话题
   2. 高级搜索 得到同时满足下列条件的话题
      1. 输入关键字，要求话题 或 跟帖 或 或 简介 发帖人昵称 含关键字（$4$个复选框分别控制，共$2^4=16$种选择方案）
      2. 在五个复选框选择五种分类类别 要求话题类别包含在选择范围内($32$种方案)
      3. 在两个时间选择框输入起始和结束时间(年月日)(默认结束时间是当天，起始时间是当天的30天前) 要求话题的发起时间 或 最后跟帖时间(两个复选框控制$4$种方案)在时间范围内
2. 一个分类选择框 可以单选类别：全部、感情、学习、心灵、职业、校园热点
3. 排序依据选择框 可以单选排序依据
   1. 按最后跟帖时间先后 时间升序和时间降序 两种
   2. (不保证完成该点) 按话题发起时间先后 时间升序和时间降序 两种
   3. (不保证完成该点) 按浏览次数多寡 数量升序和降序 两种
   4. (不保证完成该点) 按跟帖数量多寡 数量升序和降序 两种



**话题展示区：**

展示由搜索筛选后的有序话题列表，初始会按顺序展示$5$个列表内话题，空间不足时允许下拉，每次下拉会将列表内下$3$个话题添加到屏幕下方，直至列表内话题全部添加完成。

每个话题展示内容如下：

1. 话题名称(字数超限会用省略号代替超出部分)
2. 话题简介(字数超限会用省略号代替超出部分)
3. 最后跟帖时间(年月日时分)
4. 话题类别(感情、学习、心灵、职业、校园热点之一)
5. 跟帖次数
6. 浏览次数



有发帖按钮，点击后可以前往新页面编辑、发布新的话题。



#### 树洞话题页面

当点击树洞首页页面的话题时跳转到对应的话题页面

话题部分构成如下：

1. 发帖人头像、昵称
2. 类别(感情、学习、心灵、职业、校园热点之一)
3. 正文话题内容
4. 发帖时间
5. 编辑话题按钮和删除话题按钮 (仅发帖人可见)

跟帖部分构成如下：

1. 跟帖人头像、昵称
2. 跟帖楼层
3. 被回复人昵称和被回复楼层 (当作为回复跟帖的跟帖时) 
4. 跟帖内容
5. 跟帖时间
6. 编辑跟帖按钮和删除跟帖按钮 (仅跟帖人可见)



#### 树洞发帖页面

发布、编辑 话题或跟帖时进入相应页面

发布时，所有框内容初始值为空或默认选项；编辑时，内容初始值为原贴内容

编辑完毕会更新跟帖/话题的发布时间，编辑跟帖时对应的话题最后跟帖时间也会更新。

构成如下：

1. 被回复人昵称和楼层 (回复跟帖时可见)
2. 帖子标题输入框 (话题时可见)
3. 帖子类别单选框 (话题时可见)
4. 话题内容输入框
5. 确认按钮

 

## 小剧场

#### 互动视频的结构

**互动视频组成**：

1. 标题
2. 发布者ID
3. 类别(感情、学习、心灵、职业、校园热点之一)
4. 发布时间 (年月日时分)
5. 浏览次数
6. 视频封面图 (也可以取首片段的第一帧)
7. 视频片段 (数据结构为有向无环图) 每个片段组成如下：
   1. 编号
   2. 标题
   3. 视频内容
   4. 互动选项 (零到若干个)(为保持屏幕排版美观，不超过6个)

**互动流程：**

1. 每个互动视频总是从一个固定视频片段(根节点)开始播放
2. 视频片段播放结束后，暂停，屏幕定格在最后一帧，弹出若干个选项，当用户选择选项后，播放选项对应的视频片段
3. 把用户从根节点开始到当前视频片段(当前节点)所经过的一系列片段(节点)连成一个有序列表(存档)，用户随时可以选择列表的任意节点并跳转(读档)到相应节点播放视频片段



> 会提供数个作为样例的互动视频，但没有真实业务场景信息。



#### 剧场主页页面

小剧场主页从上到下由以下部分组成：搜索筛选区、小剧场展示区

**搜索筛选区：**

1. (不保证完成该点) 一个高级搜索框，点击展开，有两种搜索模式：

   1. 普通搜索 输入关键字，得到标题或简介含关键字的互动视频

      (标题含关键字的优先呈现，其次是简介含关键字的；在该前提下，关键字吻合越多的越考前)

   2. 高级搜索 得到同时满足下列条件的话题

      1. 在五个复选框选择五种分类类别 要求话题类别包含在选择范围内($32$种方案)
      2. 在两个时间选择框输入起始和结束时间(年月日)(默认结束时间是当天，起始时间是当天的30天前) 要求话题的发起时间 或 最后跟帖时间(两个复选框控制$4$种方案)在时间范围内

2. 一个分类选择框 可以单选类别：全部、感情、学习、心灵、职业、校园热点

3. 排序依据选择框 可以单选排序依据

   1. 按发布时间先后 时间升序和时间降序 两种
   2. (不保证完成该点) 按浏览次数多寡 数量升序和降序 两种

**互动视频展示区：**

展示由搜索筛选后的有序互动视频列表，初始会按顺序展示$5$个列表内互动视频，空间不足时允许下拉，每次下拉会将列表内下$3$个互动视频添加到屏幕下方，直至列表内互动视频全部添加完成。

每个互动视频展示内容如下：

1. 视频标题
2. 视频分类 (感情、学习、心灵、职业、校园热点)
3. 浏览次数
4. 视频封面

点击后进入互动视频页面



#### 互动视频页面

当点击小剧场首页页面的互动视频时跳转到对应的互动视频页面

构成如下：

1. 发布人头像、昵称
2. 发布时间
3. 分类 (感情、学习、心灵、职业、校园热点)
4. 视频播放器
5. 浏览次数



## “我”页面

#### 用户信息结构

用户信息由以下部分组成：

1. 头像图片地址(url)
2. 昵称
3. 学校信息
4. 个性签名
5. 积分点数
6. 已购买商品列表 (商品ID + 购买数量)
7. 悄悄话预约记录 (时间区间(年月日时分)列表)
8. VR体验展预约记录  (时间区间(年月日时分)列表)
9. 收藏列表 (树洞话题和互动视频分开存)
10. 浏览记录 (树洞话题和互动视频分开存)
11. 我的树洞 (话题和跟帖不分开存)



#### “我”主页页面

分为基本信息展示区和功能按钮区。

**基本信息展示区**内容如下：

1. 用户头像

2. 用户昵称

3. (不保证完成该点) 用户学校信息

   (自由填，无格式要求，建议学校+校区+年级专业)

4. (不保证完成该点) 个性签名

点击该区域任意地方跳转到详细信息页面。



**功能按钮区**内容如下：(点击后跳转到对应页面)

1. 我的消息按钮
2. 收藏列表按钮
3. 浏览记录按钮
4. 我的树洞按钮
5. 查看帮助按钮
6. 联系客服按钮
7. 投诉反馈按钮



当有“我的消息”新消息时，会有红色气泡显示。新消息产生当且仅当自己的话题或跟帖被回复。



#### 详细信息页面

这个页面的主要作用是修改信息。

所有内容点击后进入编辑状态，输入完毕后点击保存

1. 头像 (默认为微信头像)
2. 昵称 (默认为微信昵称)
3. (不保证完成该点)学校信息
4. (不保证完成该点)个性签名

鉴于实际与微信绑定，退出登录没有意义，故不支持退出登录



#### 我的消息页面

以列表形式呈现消息，顶端选择栏可以筛选：新消息和所有信息

每则消息内容如下：

1. 话题标题 (若为话题则话题；否则为跟帖所属话题+“下的跟帖”)
2. 回复人昵称
3. 回复内容节选(超出位置部分省略号代替)
4. 回复时间 (年月日时分)

点击后跳转到对应话题



#### 收藏列表页面

顶端选择是树洞还是小剧场收藏。

收藏列表的展示布局和内容同对应的树洞/小剧场主页布局和内容。

按收藏时间从近到远排序

点击后跳转到对应内容



#### 浏览记录页面

顶端选择是树洞还是小剧场

展示布局和内容同对应的树洞/小剧场主页布局和内容(但时间为最后浏览时间)

按浏览时间从近到远排序，重复浏览只记录最后一次

点击后跳转到对应内容



#### 我的树洞按钮

展示布局和内容同对应的树洞主页布局和内容

若为跟帖，标题=标题+“下的跟帖”

按最后编辑时间从近到远排序

点击后跳转到对应内容



#### 联系客服、帮助页面

纯图文介绍(或纯文本介绍)，无可点击按钮



#### 投诉反馈页面

微信统一定制的页面
